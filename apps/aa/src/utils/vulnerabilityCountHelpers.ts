import { VULNERABILITY_FIELD } from '../constants';

const {
  TYPE_OF_SSA_1,
  TYPE_OF_SSA_2,
  TYPE_OF_SSA_3,
  HOW_MANY_LACTATING,
  HOW_MANY_PREGNANT,
} = VULNERABILITY_FIELD;

export const mapVulnerabilityStatusCount = (data: any[]) => {
  let myData = {};
  for (let d of data) {
    const extras = d?.extras ?? null;
    if (extras && extras[HOW_MANY_LACTATING]) {
      if (myData['Lactating']) {
        myData['Lactating'] += +extras[HOW_MANY_LACTATING];
      } else myData['Lactating'] = +extras[HOW_MANY_LACTATING];
    }
    if (extras && extras[HOW_MANY_PREGNANT]) {
      if (myData['Pregnant']) {
        myData['Pregnant'] += +extras[HOW_MANY_PREGNANT];
      } else myData['Pregnant'] = +extras[HOW_MANY_PREGNANT];
    }

    if (extras && extras[TYPE_OF_SSA_1]) {
      const label = extras[TYPE_OF_SSA_1];
      if (myData[label]) {
        myData[label] += 1;
      } else myData[label] = 1;
    }
    if (extras && extras[TYPE_OF_SSA_2]) {
      const label = extras[TYPE_OF_SSA_2];
      if (myData[label]) {
        myData[label] += 1;
      } else myData[label] = 1;
    }
    if (extras && extras[TYPE_OF_SSA_3]) {
      const label = extras[TYPE_OF_SSA_3];
      if (myData[label]) {
        myData[label] += 1;
      } else myData[label] = 1;
    }
  }
  return myData;
};
